import{d as a,y as $,k as _,o as r,c as A,w as E,a as e,l as f,a1 as R,e as u,h as y,F as w,t as n,a3 as V,f as j}from"./app-e9876731.js";import H from"./AdminPannel-48a367c8.js";const N=e("div",{class:"text-4xl font-semibold text-unibague-blue",style:{"text-align":"center"}}," Gestionar Usuarios ",-1),S={class:"flex flex-col mt-8 mx-6"},z={class:"mb-4"},D={class:"py-2 -my-2 overflow-x-auto sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8"},F={class:""},G={class:"min-w-full bg-white shadow-md rounded-lg overflow-hidden"},I=e("thead",{class:"bg-unibague-blue text-white"},[e("tr",null,[e("th",{class:"text-left py-4 px-6"},"Nombre"),e("th",{class:"text-left py-4 px-6"},"Correo"),e("th",{class:"text-left py-4 px-6"},"Rol"),e("th",{class:"text-left py-4 px-6"},"Editar Rol"),e("th",{class:"text-left py-4 px-6"},"Eliminar")])],-1),T={class:"bg-white"},O={class:"px-6 py-4 border-b border-gray-200"},Q={class:"px-6 py-4 border-b border-gray-200"},q={class:"px-6 py-4 border-b border-gray-200"},J={class:"px-6 py-4 border-b border-gray-200"},K=["onClick"],W=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),X=[W],Y={class:"px-6 py-4 border-b border-gray-200"},Z=["onClick"],ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),te=[ee],se={class:"flex justify-between mt-4"},oe=["disabled"],le={class:"px-4 py-2"},ae=["disabled"],re={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},ne={class:"bg-white p-6 rounded-lg shadow-lg w-96"},ie=e("h2",{class:"text-2xl mb-4"},"Editar Rol de Usuario",-1),de=e("label",{for:"role",class:"block text-gray-700"},"Nuevo Rol",-1),ue=["value"],ce={class:"mt-6"},pe={__name:"Index",props:{usersProp:Array,avaliableRoles:Array},setup(k){const h=k,c=a(!1),b=a(""),m=a(null),i=a([]),l=a(1),v=a(10),d=a(""),C=t=>{c.value=!0,m.value=t},L=async()=>{const t=route("users.update",{user:m.value});try{await axios.patch(t,{role_id:b.value}),location.reload()}catch(s){return s}};$(()=>{i.value=[...h.usersProp]});const U=async t=>{if(!confirm("seguro desea borrar?"))return;const s=`users/${t}`;try{await axios.delete(s),P(t)}catch{alert("Hubo un problema al borrar el user seleccionado")}},P=t=>{i.value=i.value.filter(s=>s.id!==t)},x=_(()=>d.value?i.value.filter(t=>t.name.toLowerCase().includes(d.value.toLowerCase())||t.email.toLowerCase().includes(d.value.toLowerCase())):i.value),B=_(()=>{const t=(l.value-1)*v.value,s=t+v.value;return x.value.slice(t,s)}),p=_(()=>Math.ceil(x.value.length/v.value)),g=t=>{t>=1&&t<=p.value&&(l.value=t)};return(t,s)=>(r(),A(H,{class:"bg-unibague-blue bg-opacity-5"},{default:E(()=>[e("div",null,[N,e("div",S,[e("div",z,[f(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o),type:"text",placeholder:"Buscar por nombre o correo",class:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[R,d.value]])]),e("div",D,[e("div",F,[e("table",G,[I,e("tbody",T,[(r(!0),u(w,null,y(B.value,o=>(r(),u("tr",{key:o.id},[e("td",O,n(o.name),1),e("td",Q,n(o.email),1),e("td",q,n(o.role.name),1),e("td",J,[e("button",{onClick:M=>C(o.id)},X,8,K)]),e("td",Y,[e("button",{onClick:M=>U(o.id)},te,8,Z)])]))),128))])]),e("div",se,[e("button",{onClick:s[1]||(s[1]=o=>g(l.value-1)),disabled:l.value===1,class:"bg-unibague-blue text-white font-semibold rounded hover:bg-blue-600 py-2 px-4"}," Anterior ",8,oe),e("span",le,"PÃ¡gina "+n(l.value)+" de "+n(p.value),1),e("button",{onClick:s[2]||(s[2]=o=>g(l.value+1)),disabled:l.value===p.value,class:"bg-unibague-blue text-white font-semibold rounded hover:bg-blue-600 py-2 px-4"}," Siguiente ",8,ae)])])])]),c.value?(r(),u("div",re,[e("div",ne,[ie,e("div",null,[de,f(e("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>b.value=o),id:"role",class:"w-full mt-2 p-2 border rounded-lg"},[(r(!0),u(w,null,y(h.avaliableRoles,o=>(r(),u("option",{value:o.id,key:o.id},n(o.name),9,ue))),128))],512),[[V,b.value]])]),e("div",ce,[e("button",{onClick:L,class:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg"},"Guardar Cambios"),e("button",{onClick:s[4]||(s[4]=o=>c.value=!1),class:"w-full px-4 py-2 mt-4 bg-red-500 text-white rounded-lg"},"Cancelar")])])])):j("",!0)])]),_:1}))}};export{pe as default};
