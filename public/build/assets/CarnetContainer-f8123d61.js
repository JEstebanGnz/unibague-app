import h from"./Carnet-054cee54.js";import p from"./CarnetSkeleton-9989d1f2.js";import{d as u,p as C,o as d,c as f,u as r}from"./app-a2a19cf5.js";import"./_plugin-vue_export-helper-c27b6911.js";class l{constructor(n,t,o,a,i,s,e,g){this.name=n.toLowerCase(),this.user=t,this.role=o,this.identification=a,this.primaryInfo=i.toLowerCase(),this.secondaryInfo=s.toLowerCase(),this.color=e,this.qrCode=g,this.image=this.getImage()}getImage(){return`https://siga.unibague.edu.co/sgacampus/images/dynamic/foto/1/${this.identification}/${this.identification}.jpg`}}class v{static createCarnet(n){let t=[];return n.forEach(o=>{let a=null;try{o.role==="Estudiante"&&(a=new l(o.name,o.user,"Estudiante",o.identification,o.currentProgram,"","#003D7C")),o.role==="Funcionario"&&(a=new l(o.name,o.user,"Funcionario",o.identification,o.department,o.position,"#FF5F2C")),o.role==="Graduado"&&(a=new l(o.name,o.user,"Egresado",o.identification,o.finishedProgram,"","#FFCC00")),a&&t.push(a)}catch(i){console.log("Error creando carnet",i,o)}}),t}}const F={__name:"CarnetContainer",props:{qrCode:String},setup(c){const n=u(!0),t=async()=>{const s=route("personalInfo");console.log(s);try{const e=await axios.get(s);return console.log(e.data),n.value=!1,e.data}catch(e){return console.log("No se obtuvo informacion",e),alert("El usuario no posee ningún carné activo o asociado, por favor comuníquese con g3@unibague.edu.co en dado caso de tener dudas")}},o=u([]);let a=u(0);C(async()=>{o.value=v.createCarnet(await t())});const i=()=>{a.value<o.value.length&&(a.value++,console.log(a)),a.value===o.value.length&&(a.value=0)};return(s,e)=>n.value?(d(),f(p,{key:0})):(d(),f(h,{key:1,image:o.value[r(a)].image,name:o.value[r(a)].name,user:o.value[r(a)].user,role:o.value[r(a)].role,identification:o.value[r(a)].identification,primaryInfo:o.value[r(a)].primaryInfo,secondaryInfo:o.value[r(a)].secondaryInfo,qrCode:c.qrCode,color:o.value[r(a)].color,onCambiarCarnet:i,showChangeButton:o.value.length>1},null,8,["image","name","user","role","identification","primaryInfo","secondaryInfo","qrCode","color","showChangeButton"]))}};export{F as default};
